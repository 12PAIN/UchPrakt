# Обзор средств для отладки программ на языках программирования. Программные средства отладки программ на языках программирования



## Введение

* В настоящее время программирование является динамично развивающейся областью, и каждый человек, который относит себя к этой области, должен соответствовать этому развитию. Несмотря на то, что мы являемся начинающими программистами, нам важно получить продвинутые навыки и знания в кратчайшие сроки. Программная отладка является одним из важных инструментом, которым обязан уметь пользоваться любой программист. Каждый программист занимается отладкой своих программ,но не каждый делает это с помощью специальных средств. Наша работа направлена на то, чтобы ознакомить программистов, не использующих средства отладки, с данным полезнейшим инструментом.

* Вы узнаете:

  * Что такое отладка
  * Почему отладка - одно из важнейших требований к программисту
  * Как пользоваться отладкой
  * Как пользоваться продвинутыми методами отладки
  * Введение в тестирование

* Обзор-руководство содержит:

  * Теоретическую часть отладки
  * Теория тестирования
  * Введение в отладку и тестирование
  * Руководство по отладке и тестированию
  * Алгоритм отладки программ
  * Практические примеры на языках C++, Java


## Актуальность 
  * Возможность научиться использовать отладку и отладчики в разных средах программирования
  * Данный обзор позволит начинающему программисту узнать об отладке программ через программные средства и научиться делать отладку
  * Некоторые функции отладки не используются большинством программистов


## Почему это важно для нас?
  * Мы - начинающие программисты и нам важно научиться отлаживать программы используя автоматизированные программные средства
  
  
## Цель
  * Составить краткое рукодство об отладке и её модулях на языках программирования в разных IDE
  
  
## Задачи
  1. Изучить функциональность отладки разных IDE ( на каждый язык по два IDE )
  2. Научиться использовать изученный материал( научиться пользоваться программной отладкой )
  3. Систематизировать полученную теоретическую и практическую информацию. Сравнить возможности средств отладки в рамках одного языка друг с другом
  4. Составить обзор-руководство по составляющим отладки программ на языках программирования 
  
  
## Конечный результат
  * Конечным результатом данной работы является обзор-руководство по отладке программ
  
  ---

## Состав команды

Ф.И.О | Роль | Логин на GitHub
------|------|----------------
Астанин А.В | Разработчик, Тимлид | 12PAIN
Дочкин Н.С | Разработчик, Тестировщик | DochkinNikita
Крюкова К.С | Тестировщик, Разработчик | kseniykr


## Средства, используемые в ходе выполнения исследования

* GitHub
* Git
* Microsoft Visual Studio
* Code::Blocks
* Microsoft Office


## План-график работы

Дата| Событие
------|------
4.02.21 | Начало работы над исследованием, начало изучения теоретического материала
25.03.21 | Начальные результаты работы, вводная часть обзора-руководства, проба "пера" на практике
8.04.21 | Конец изучения теоретического материала, углубленное использование отладки на практике при работе над учебными проектами, начало написания содержания обзора-руководства
22.04.21 | Систематизирование изученной теории, научиться использовать отладку "свободно", написание теоретической части обзора
6.05.21 | Написание руководства по отладке: что использовать? в каком случае? на каких программах? как использовать? в каком порядке? почему?
20.05.21 | Защита работы

Данный план является лишь примерным и в полной мере не отображает реальных сроков

---

## Теоретическая часть

---

### Введение в отладку

* Отладка — этап разработки компьютерной программы, на котором обнаруживают, локализуют и устраняют ошибки. Чтобы понять, где возникла ошибка, приходится: узнавать текущие значения переменных; выяснять, по какому пути выполнялась программа.

* Использование отладчиков — программ, которые включают в себя пользовательский интерфейс для пошагового выполнения программы: оператор за оператором, функция за функцией, с остановками на некоторых строках исходного кода или при достижении определённого условия.

### Термины и понятия, используемые в тексте

  * Отладка (дебаг, дебаггинг) - процесс нахождения и исправления ошибок в исходном коде программы.  Процесс поиска, локализации и исправления ошибок в компьютерной программе. На всех этапах разработки программного обеспечения О. п. тесно связана с тестированием программ. В процессе тестирования (напр., с использованием спец. подобранных наборов исходных данных) могут достигаться такие состояния программы, в которых фиксируются расхождения с заданными спецификациями. О. п. обеспечивает поиск причин этих расхождений (локализацию ошибок) и соответствующую корректировку программы. В процессе трансляции и выполнения программы (которая реализует некоторую функцию) компьютер, используя свои аппаратно-программные ресурсы, доопределяет (напр., вызывает из библиотеки стандартные подпрограммы) частично определённую программой функцию до т. н. тотально определённой. Т. о. судить о правильности или неправильности результатов выполнения программы можно только сравнивая заданную спецификацию функции с результатами её вычислений, что и осуществляется в процессах тестирования и отладки.
  * Точка останова (далее брэкпойнт, точка останова) - точка, в которой программа прерывает своё выполнение до дальнейших действий программиста.  Это специальные маркеры, на которых отладчик останавливает процесс выполнения программы.
  * Степпинг (англ. «stepping») — это возможность отладчика выполнять код пошагово (строка за строкой).


### Инструменты отладки

* Отладчик представляет из себя программный инструмент, позволяющий программисту наблюдать за выполнением исследуемой программы, останавливать и перезапускать её, прогонять в замедленном темпе, изменять значения в памяти и даже, в некоторых случаях, возвращать назад по времени.

* Также полезными инструментами в руках программиста могут оказаться:

  * Профилировщики. Они позволят определить, сколько времени выполняется тот или иной участок кода. Анализ покрытия позволяет выявить неисполняемые участки кода.
  * API логгеры позволяют отследить взаимодействие программы и Windows API при помощи записи сообщений Windows в лог.
  * Дизассемблеры позволяют посмотреть ассемблерный код исполняемого файла
  * Снифферы помогут отследить сетевой трафик, генерируемый программой
  * Снифферы аппаратных интерфейсов позволяют увидеть данные, которыми обмениваются система и устройство.
  * Логи системы. Записи системных действий.

Однако эти инструменты не будут рассмотрены в данном обзоре.


### Место отладки в цикле разработки программы

Типичный цикл разработки, за время жизни программы многократно повторяющийся, выглядит примерно так:

1. Программирование — внесение в программу новой функциональности, исправление существующих ошибок.
1. Тестирование — обнаружение факта ошибки.
1. Воспроизведение ошибки — выяснение условий, при которых ошибка случается. Это может оказаться непростой задачей при программировании параллельных процессов и при некоторых необычных ошибках, известных как гейзенбаги.
1. Отладка — обнаружение причины ошибки.


### Анализ проблемы. Введение в практическую отладку

* Для начала, в процессе написания программы, в случае возникновения ошибок, вызывающих неожиданное поведение алгоритмов и/или блоков кода, необходимо задать себе два вопроса:

  * Что должно было произойти?
  * Что пошло не так?

- Чтобы ответить на первый вопрос, мы должны иметь данные успешно работающего алгоритма и/или эксперимента. На данный вопрос, как правило, просто ответить.

- Второй вопрос обычно требует как минимум рассмотрения кода на предмет ошибок. Здесь нам и понадобится отладчик. Во многих случаях возникает ситуация, в которой простого рассмотрения кода и вывода отладочных сообщений будет либо недостаточно, либо это займет слишком много времени, по сравнению с программной отладкой. Имея средство отладки и профилирования программы, программист может с легкостью отследить путь её выполнения, значения переменных в любой момент времени, выполнить программу шаг за шагом. Всё это позволяет с легкостью определить ошибки в коде.

* Предположите, что именно в вашей программе пошло не так, в чём может заключаться непредвиденное поведение?

* Проверьте ваши предположения:
  * Используете ли вы нужный API (то есть соответствующие объект, функцию, метод или свойство)? Возможно, используемый вами API работает не так, как вы ожидаете. (После проверки вызова API в отладчике для исправления проблемы и выявления нужного API вам может потребоваться обратиться к документации.)
  
  * Правильно ли вы используете API? Даже если вы выбрали нужный API, он может использоваться неправильно.
  
  * Нет ли в вашем коде опечаток? Некоторые опечатки, например ошибки в написании имени переменной, могут быть незаметными, особенно при работе с языками, в которых не требуется объявление переменных перед их использованием.

  * Вносили ли вы изменения в код и могут ли они быть связаны с возникшей проблемой?
  
  * Должны ли объект или переменная содержать определенное значение (или определенный тип значения) и соответствует ли это действительности?
  
  * Известно ли назначение кода? Как правило, отладка кода, написанного другим разработчиком, дается гораздо сложнее. Если это не ваш код, возможно, для его эффективной отладки вам потребуется изучить, что он делает.

* Стоит отметить, что отладка не является "магическим" инструментом, который найдет и исправит все ошибки за вас. Одного отладчика для нахождения неточностей недостаточно. Кроме отладчика, программисту нужно понимание того, что написано в его оде, понимание того, как это работает, чтобы определить, в каком примерно участке программы возникла ошибка.

* После анализа проблемы и нахождения конкретного места ошибки мы можем приступить к дебагу, то есть к процессу исправления кода.

* В случаях, когда проделать анализ, поиск и дебаг недостаточно для полного исправления "ошибочной" программы, может помочь повторное пошаговое воспроизведение. Если и этого будет недостаточно, то скорее всего, ошибка не в коде программы, а в алгоритмах, обрабатывающих информацию.

### Типы ошибок

* Синтаксическая ошибка возникает, когда вы пишете код, который не соответствует правилам грамматики языка C++. Например, пропущенные точки с запятой, необъявленные переменные, непарные круглые или фигурные скобки и т.д.
* Семантическая ошибка возникает, когда код является синтаксически правильным, но делает не то, что задумал программист.

### Теория отладки на практике
* Прежде, чем приступить к практике, стоит разобраться в основном алгоритме отладки. Выше мы уже ознакомили вас с основными понятиями, которые необходимы для понимания процесса. 

1. Запустить программу
2. Проверить программу на ошибки, в случае, если их нет перейти к пункту 8
3. Проанализировать ошибку/баг/неявное поведение. Выдвинуть предположение (что именно пошло не так? в какой части кода может быть ошибка? что-то не так с кодом? )
4. Расставить точки останова(см.далее) в местах, где по вашему мнению содержится код, который необходимо исправить.
5. Запустить отладочную версию программы (Debug)
6. Пошагово выполнить фрагмент кода
7. В случае обнаружения ошибки/бага исправить его, если ошибку не нашли либо вернуться к пункту 6 и выполнить код на других данных, либо вернуться к пункту 3
8. Завершить отладку программы

* Данный алгоритм отладки является показательным. В случае использования продвинутой отладки, условной отладки или модульного или любого другого тестирования, следует понимать, что алгоритм может быть изменён.


### Примеры "отладочных" случаев

  * Зачастую на стадии компиляции компилятор и так укажет вам на синтаксические ошибки. Но что будет, если синтаксически всё будет написанно правильно? Допустим, вы забыли где-то скобки (например, в вычислениях) или взяли другую переменную в качестве параметра. Безусловно, в такой ситуации компилятор скомпилирует вашу программу, но изначально ошибку вы не увидите. Теперь представьте что ваш проект состоит из нескольких тысяч или сотен тысяч строк кода. Представили? Теперь представьте что в одной из строк пропущена скобка. Вряд-ли вы будете сидеть и глазами искать её. Для таких случаев и существует отладчик

  * Отладка программы позволит вам пошагово отследить, в какой момент выполнение начинает идти по отклоняющейся траектории. Соответственно, именно в тех строках, на которых, говоря простым языком, "спотыкается" программа, и находится ошибка. Благодаря отладке вы смогли в разы сократить время на поиск неточностей, и теперь можете смело редактировать их. Поздравляем, вы великолепны!

  * Иногда отладка помогает обнаружить опечатки, наличие которых в корне меняет суть всей работы. В этом плюс именно пошагового выполнения с указанием исполняемой строки. Например, в случае если выполняется функция, схожая по названию с требуемой (команда проекта настоятельно не рекомендует называть функции и переменные практически идентично, если того не требует регламент), вы можете отследить это не только в одном конкретном месте, но и во всём коде.

  * Настоятельно рекомендуем вам выдвигать предположения о том, что могло пойти не так. Понимание кода - один из ключевых навыков программиста.


## Отладка на языке C++ в среде программирования Visual Studio

### Степпинг

#### Шаг с заходом 

* Команда «Шаг с заходом» (англ. «Step into») выполняет следующую строку кода. Если этой строкой является вызов функции, то «Шаг с заходом» открывает функцию и выполнение переносится в начало этой функции.

 Как вы уже знаете, при запуске программы выполнение начинается с вызова главной функции main(). Так как мы хотим выполнить отладку внутри функции main(), то давайте начнем с использования команды «Шаг с заходом».

 В Visual Studio, перейдите в меню "Отладка" > "Шаг с заходом" (либо нажмите F11):
![Шаг с заходом](https://ravesli.com/wp-content/uploads/2016/12/1.png)

 Если вы используете другую IDE, то найдите в меню команду "Step Into/Шаг с заходом" и выберите её.

 Когда вы это сделаете, должны произойти две вещи. Во-первых, так как наше приложение является консольной программой, то должно открыться консольное окно. Оно будет пустым, так как мы еще ничего не выводили. Во-вторых, вы должны увидеть специальный маркер слева возле открывающей скобки функции main(). В Visual Studio этим маркером является жёлтая стрелочка (если вы используете другую IDE, то должно появиться что-нибудь похожее):
 
 ![Шаг с заходом](https://ravesli.com/wp-content/uploads/2016/12/2.png)
 
 Стрелка-маркер указывает на следующую строку, которая будет выполняться. В этом случае отладчик говорит нам, что следующей строкой, которая будет выполняться, — будет открывающая фигурная скобка функции main(). Выберите «Шаг с заходом» еще раз — стрелка переместится на следующую строку:
 
 ![Шаг с заходом](https://ravesli.com/wp-content/uploads/2016/12/3.png)
 
 Это значит, что следующей строкой, которая будет выполняться, — будет вызов функции printValue(). Выберите «Шаг с заходом» еще раз. Поскольку printValue() — это вызов функции, то мы переместимся в начало функции printValue():
 
 ![Шаг с заходом](https://ravesli.com/wp-content/uploads/2016/12/4.png)
 
 Выберите еще раз «Шаг с заходом» для выполнения открывающей фигурной скобки printValue(). Стрелка будет указывать на std::cout << nValue;.
 
 Теперь выберите «Шаг с обходом» (F10). Вы увидите число 5 в консольном окне.

Выберите «Шаг с заходом» еще раз для выполнения закрывающей фигурной скобки printValue(). Функция printValue() завершит свое выполнение и стрелка переместиться в функцию main(). Обратите внимание, в main() стрелка снова будет указывать на вызов printValue():

![Шаг с обходом](https://ravesli.com/wp-content/uploads/2016/12/5.png)

Может показаться, будто отладчик намеревается еще раз повторить цикл с функцией printValue(), но в действительности он нам просто сообщает, что он только что вернулся из этой функции.

Выберите «Шаг с заходом» два раза. Готово, все строки кода выполнены. Некоторые дебаггеры автоматически прекращают сеанс отладки в этой точке. Но Visual Studio так не делает, так что если вы используете Visual Studio, то выберите "Отладка" > "Остановить отладку" (или Shift+F5):

![Шаг с обходом](https://ravesli.com/wp-content/uploads/2016/12/6.png)

Таким образом мы полностью остановили сеанс отладки нашей программы.


#### Шаг с обходом

Команда «Шаг с обходом»
Как и команда «Шаг с заходом», команда «Шаг с обходом» (англ. «Step over») позволяет выполнить следующую строку кода. Только если этой строкой является вызов функции, то «Шаг с обходом» выполнит весь код функции в одно нажатие и возвратит нам контроль после того, как функция будет выполнена.

Рассмотрим пример, используя следующую программу:

```c++

 #include <iostream>
 
 void printValue(int nValue)
 {
     std::cout << nValue;
 }
 
 int main()
 {
     printValue(5);
     return 0;
  }
```


Нажмите «Шаг с заходом», чтобы дойти до вызова функции printValue():

![](https://ravesli.com/wp-content/uploads/2016/12/10-1.png)

Теперь вместо команды «Шаг с заходом» выберите «Шаг с обходом» (или F10):

![](https://ravesli.com/wp-content/uploads/2016/12/7.png)

Отладчик выполнит функцию (которая выведет значение 5 в консоль), а затем возвратит нам управление на строке return 0;. И это всё за одно нажатие.

Команда «Шаг с обходом» позволяет быстро пропустить код функций, когда мы уверены, что они работают корректно и их не нужно отлаживать.

#### Шаг с выходом

В отличие от двух предыдущих команд, команда «Шаг с выходом» (англ. «Step out») не просто выполняет следующую строку кода. Она выполняет весь оставшийся код функции, в которой вы сейчас находитесь, и возвращает контроль только после того, когда функция завершит свое выполнение. Проще говоря, «Шаг с выходом» позволяет выйти из функции.

Обратите внимание, команда «Шаг с выходом» появится в меню «Отладка» только после начала сеанса отладки (что делается путем использования одной из двух вышеприведенных команд).

Рассмотрим все тот же пример:


```c++

 #include <iostream>
 
 void printValue(int nValue)
 {
     std::cout << nValue;
 }
 
 int main()
 {
     printValue(5);
     return 0;
  }
```

Нажимайте «Шаг с заходом» до тех пор, пока не перейдете к открывающей фигурной скобке функции printValue():

![](https://ravesli.com/wp-content/uploads/2016/12/8.png)

Затем выберите "Отладка" > "Шаг с выходом" (либо Shift+F11):

![](https://ravesli.com/wp-content/uploads/2016/12/9.png)

Вы заметите, что значение 5 отобразилось в консольном окне, а отладчик перешел к вызову функции printValue() в main():

![](https://ravesli.com/wp-content/uploads/2016/12/10-1.png)

#### Выполнить до текущей позиции

В то время как степпинг полезен для изучения каждой строки кода по отдельности, в большой программе перемещаться по коду с помощью этих команд будет не очень удобно.

Но и здесь современные отладчики предлагают еще несколько инструментов для эффективной отладки программ.

Команда «Выполнить до текущей позиции» позволяет в одно нажатие выполнить весь код до строки, обозначенной курсором. Затем контроль обратно возвращается к вам, и вы можете проводить отладку с указанной точки уже более детально. Давайте попробуем, используя уже знакомую нам программу:


```c++

 #include <iostream>
 
 void printValue(int nValue)
 {
     std::cout << nValue;
 }
 
 int main()
 {
     printValue(5);
     return 0;
  }
```

Поместите курсор на строку std::cout << nValue; внутри функции printValue(), затем щелкните правой кнопкой мыши и выберите "Выполнить до текущей позиции" (либо Ctrl+F10):

![](https://ravesli.com/wp-content/uploads/2016/12/11.png)

Вы заметите, что жёлтая стрелочка переместится на указанную вами строку. Выполнение программы остановится в этой точке, и программа будет ждать ваших дальнейших команд.

#### Продолжить

Если вы находитесь в середине сеанса отладки вашей программы, то вы можете сообщить отладчику продолжать выполнение кода до тех пор, пока он не дойдет до конца программы (или до следующей контрольной точки). В Visual Studio эта команда называется «Продолжить» (англ. «Continue»). В других дебаггерах она может иметь название «Run» или «Go».

Возвращаясь к вышеприведенному примеру, мы находимся как раз внутри функции printValue(). Выберите "Отладка" > "Продолжить" (или F5):

![](https://ravesli.com/wp-content/uploads/2016/12/12.png)

Программа завершит свое выполнение и выйдет из сеанса отладки.



### Точки останова

* Точки останова (англ. «breakpoints») — это специальные маркеры, на которых отладчик останавливает процесс выполнения программы.

* Чтобы задать точку останова в Visual Studio, щелкните правой кнопкой мыши по выбранной строке > "Точка останова" > "Вставить точку останова":
![Вставка точки останова](https://ravesli.com/wp-content/uploads/2016/12/13.png)
Появится кружок возле строки, в которую вы вставили точку останова: 
![Вставка точки останова](https://ravesli.com/wp-content/uploads/2016/12/14-1.png)

Точки останова чрезвычайно полезны, если вы хотите изучить только определенную часть кода. Просто задайте точку останова в выбранном участке кода, выберите команду «Продолжить» и отладчик автоматически остановится возле указанной строки. Затем вы сможете использовать команды степпинга для более детального просмотра/изучения кода.


## Список литературы

1. Принципы отладки для начинающих // microsoft.com/ URL: https://docs.microsoft.com/ru-ru/visualstudio/debugger/debugging-absolute-beginners?view=vs-2019 (дата обращения: 25.03.2021).
2. 
